# 表单输入绑定

## v-model指令

* 双向绑定：数据可以影响视图，视图的更改也能影响数据
* 两个指令的结合：v-bind指令和v-on：input的结合
* input事件使用event.target.value来获取当前表单的最新值

## 双向绑定的强大

* v-model会根据不同的控件类型来选取正确的方法来更新元素
* v-model会忽略所有表单元素的value,checked，selected。attribute的初始值总是把Vue实例的数据作为数据来源

## v-model的实现原理

```javascript
Vue.component('custom-input', {
  props: ['value'],
  template: `
    <input
    // 父组件并没有给传value的值
      v-bind:value="value"
      // 是不是调动组件的地方会自动触发注册的input事件
      v-on:input="$emit('input', $event.target.value)"
    >
  `
})

// 组件调用的地方
<custom-input v-model="searchText"></custom-input>
```

## model模块

* 一个组件上的v-model会默认利用名为value的prop和名为input的事件，但是像单选框，复选框类型的输入控件会不同，所以引用model模块来规范
* v-model的值会传入名为value的prop值内，并且每触发一次input事件，v-model绑定的值都会被更新。

```javascript
Vue.component('base-checkbox', {
  model: {
    <!-- 使用model模块将默认的value指定为checked，input事件指定为change事件 -->
    prop: 'checked',
    event: 'change'
  },
  props: {
    <!-- checked必须要在 props中声明 -->
    checked: Boolean
  },
  template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      <!-- $event.target.checked是checked不是value -->
      v-on:change="$emit('change', $event.target.checked)"
    >
  `
})
<base-checkbox v-model="lovingVue"></base-checkbox>
<!-- 这里的 lovingVue 的值将会传入这个名为 checked 的 prop。同时当 <base-checkbox> 触发一个 change 事件并附带一个新的值的时候，这个 lovingVue 的 property 将会被更新。 -->
```

## 不同控件

* radio属性的input需要value来定义radio的值。然后每个radio使用v-model绑定一个变量。这个变量会与被选择的radio控件的value同步
* radio要想有默认值的话，不能用checked来指定默认值，要用Vue的变量来指定默认值

* checkbox单选框的话绑定一个布尔值，checkbox多选框的话要绑定一个数组(数组里面放的是每一个checkbox的value值)。
* checkbox单选的时候不需要有value，只是绑定一个v-model就行了。

* 绑定到input绑定到文本同步更新
* 绑定到textarea多行文本，同步更新。textarea标签中间填写的数据不会被显示

* 单选按钮绑定到一个字符串类型值上(v-model绑定到select上)
* 选择框不给value值时，option的值为标签之间的数据
* select选择框加入multiple ，可以一次选择多个属性，需要绑定到数组类型上(一次性选中，必须一次性鼠标选中)v-model也是写在select上

### 值绑定的概念

* 就是表单元素使用v-for遍历数组来生成，数据不是写死的

```javascript
<div id="example-5">
//如果v-model的初始值未能匹配任何选项，select元素将会被渲染为未选中状态，在ios中，会导致用户无法选择第一个选项
//因为这样的情况下，ios不会触发change事件，所以推荐使用这种第一个值为空的禁用选项
  <select v-model="selected">
    <option disabled value="">请选择</option>
    <option>A</option>
    <option>B</option>
    <option>C</option>
  </select>
  <span>Selected: {{ selected }}</span>
</div>

new Vue({
  el: '...',
  data: {
    selected: ''
  }
})
```

## input和change事件

* input在用户输入时触发，在input和textarea中使用，下拉提示框不会触发，脚本修改值不会触发
* change在失去焦点才会触发

## 修饰符

* .lazy加入lazy修饰符之后，会在change事件之后同步，而不是在input事件之后同步
* .number自动将用户输入的值转为数值类型。就算是type="number" html返回的值也会带有字符串。
* .trim会自动过滤用户的两端空白字符

## 自定义组件使用v-model

* ...